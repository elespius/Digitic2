<% content_for :sidebar_title do %>
  <%= Solidus.t(:"admin.user.user_information") %>
<% end %>

<% content_for :sidebar do %>
  <nav class="menu">
    <ul data-hook="admin_user_tab_options">
      <li<%== ' class="active"' if current == :account %>>
        <%= link_to_with_icon 'user', Solidus.t(:"admin.user.account"), edit_admin_user_path(@user) %>
      </li>
      <% if can?(:addresses, @user) %>
        <li<%== ' class="active"' if current == :address %>>
          <%= link_to_with_icon 'user', Solidus.t(:"admin.user.addresses"), addresses_admin_user_path(@user) %>
        </li>
      <% end %>
      <% if can?(:orders, @user) %>
        <li<%== ' class="active"' if current == :orders %>>
          <%= link_to_with_icon 'shopping-cart', Solidus.t(:"admin.user.orders"), orders_admin_user_path(@user) %>
        </li>
      <% end %>
      <% if can?(:items, @user) %>
        <li<%== ' class="active"' if current == :items %>>
          <%= link_to_with_icon 'edit', Solidus.t(:"admin.user.items"), items_admin_user_path(@user) %>
        </li>
      <% end %>
      <% if can?(:display, Solidus::StoreCredit) %>
        <li<%== ' class="active"' if current == :store_credits %>>
          <%= link_to_with_icon 'money', Solidus.t(:"admin.user.store_credit"), admin_user_store_credits_path(@user) %>
        </li>
      <% end %>
    </ul>

    <fieldset data-hook="admin_user_lifetime_stats">
      <legend><%= Solidus.t(:lifetime_stats) %></legend>
      <dl id="user-lifetime-stats">
        <dt><%= Solidus.t(:total_sales) %>:</dt>
          <dd><%= @user.display_lifetime_value.to_html %></dd>
        <dt><%= Solidus.t(:num_orders) %>:</dt>
          <dd><%= @user.order_count.to_i %></dd>
        <dt><%= Solidus.t(:average_order_value) %>:</dt>
          <dd><%= @user.display_average_order_value.to_html %></dd>
        <dt><%= Solidus.t(:member_since) %>:</dt>
          <dd><%= l @user.created_at.to_date %></dd>
      </dl>
    </fieldset>
  </nav>
<% end %>
