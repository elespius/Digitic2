<div data-hook="admin_payment_method_form_fields">

  <div data-hook="payment_method">

    <div class="alpha four columns">
      <div id="preference-settings">
        <div class="field">
          <%= f.label :type, Solidus.t(:provider) %>
          <%= collection_select(:payment_method, :type, @providers, :to_s, :name, {}, {:id => 'gtwy-type', :class => 'select2 fullwidth js-gateway-type'}) %>
        </div>

        <div class="field js-preference-source-wrapper">
          <%= label_tag :preference_source, 'Preference Source' %>
          <%= f.select(:preference_source, [[Solidus.t(:preference_source_none), nil]] + @object.class.available_preference_sources, {}, class: 'select2 fullwidth js-preference-source') %>
        </div>

        <div class="gateway-settings js-gateway-settings">
          <% if @object.preference_source.present? %>
            <%= Solidus.t :preference_source_using, name: @object.preference_source %>
          <% elsif !@object.new_record? %>
            <%= preference_fields(@object, f) %>
          <% end %>
        </div>

        <div class="info warning js-gateway-settings-warning"><%= Solidus.t(:provider_settings_warning) %></div>
      </div>
      <div data-hook="display" class="field">
        <%= label_tag :payment_method_display_on, Solidus.t(:display) %>
        <%= select(:payment_method, :display_on, Solidus::PaymentMethod::DISPLAY.collect { |display| [Solidus.t(display), display == :both ? nil : display.to_s] }, {}, {:class => 'select2 fullwidth'}) %>
      </div>
      <div data-hook="auto_capture" class="field">
        <%= label_tag :payment_method_auto_capture, Solidus.t(:auto_capture) %>
        <%= select(:payment_method, :auto_capture, [["#{Solidus.t(:use_app_default)} (#{Solidus::Config[:auto_capture]})", ''], [Solidus.t(:say_yes), true], [Solidus.t(:say_no), false]], {}, {:class => 'select2 fullwidth'}) %>
      </div>
      <div data-hook="active" class="field">
        <%= label_tag nil, Solidus.t(:active) %>
        <ul>
          <li>
            <%= radio_button :payment_method, :active, true %>
            <%= label_tag :payment_method_active_true, Solidus.t(:say_yes) %>
          </li>
          <li>
            <%= radio_button :payment_method, :active, false %>
            <%= label_tag :payment_method_active_false, Solidus.t(:say_no) %>
          </li>
        </ul>
      </div>
    </div>

    <div class="omega eight columns">
      <div data-hook="name" class="field">
        <%= label_tag :payment_method_name, Solidus.t(:name) %>
        <%= text_field :payment_method, :name, :class => 'fullwidth' %>
      </div>
      <div data-hook="description" class="field">
        <%= label_tag :payment_method_description, Solidus.t(:description) %>
        <%= text_area :payment_method, :description, {:cols => 60, :rows => 6, :class => 'fullwidth'} %>
      </div>
    </div>

  </div>
</div>

<div class="clear"></div>
