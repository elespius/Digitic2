<% amount_attr ||= :amount %>
<% currency_attr ||= :currency %>
<% currency ||= nil %>
<% required ||= nil %>

<div class="input-group number-with-currency js-number-with-currency">
  <div class="input-group-addon number-with-currency-symbol"></div>
  <%= f.number_field amount_attr, value: f.object.public_send(amount_attr), class: 'form-control number-with-currency-amount', required: required, min: 0 %>
  <% if currency %>
    <div class="input-group-addon number-with-currency-addon" data-currency="<%= currency %>">
      <%= ::Money::Currency.find(currency).iso_code %>
    </div>
  <% else %>
    <div class="input-group-addon number-with-currency-addon number-with-currency-select">
      <%= f.select currency_attr, ::Money::Currency.all.map(&:iso_code), {include_blank: true}, {required: required} %>
    </div>
  <% end %>
</div>
